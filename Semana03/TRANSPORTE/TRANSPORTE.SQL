
CREATE TABLE PASAJERO
( 
	IDPASAJERO           integer IDENTITY ( 1,1 ) ,
	NOMBRE               varchar(100)  NOT NULL ,
	CORREO               varchar(60)  NOT NULL ,
	CELULAR              varchar(20)  NOT NULL ,
	CONSTRAINT XPKPASAJERO PRIMARY KEY (IDPASAJERO ASC)
)
go



CREATE TABLE CIUDAD
( 
	IDCIUDAD             integer IDENTITY ( 1,1 ) ,
	NOMBRE               varchar(100)  NOT NULL ,
	CONSTRAINT XPKCIUDAD PRIMARY KEY (IDCIUDAD ASC)
)
go



CREATE TABLE RUTA
( 
	IDRUTA               integer IDENTITY ( 1,1 ) ,
	CIUDAD_ORIGEN        integer  NOT NULL ,
	CIUDAD_DESTINO       integer  NOT NULL ,
	DISTANCIA_KM         integer  NOT NULL ,
	PRECIO_ESTANDAR      numeric(10,2)  NOT NULL ,
	PRECIO_PREMIUM       numeric(10,2)  NOT NULL ,
	CONSTRAINT XPKRUTA PRIMARY KEY (IDRUTA ASC),
	CONSTRAINT FK_RUTA_CIUDAD_ORIGEN FOREIGN KEY (CIUDAD_ORIGEN) REFERENCES CIUDAD(IDCIUDAD)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_RUTA_CIUDAD_DESTINO FOREIGN KEY (CIUDAD_DESTINO) REFERENCES CIUDAD(IDCIUDAD)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE BUS
( 
	IDBUS                integer IDENTITY ( 1,1 ) ,
	PLACA                varchar(20)  NOT NULL ,
	CAP_TOTAL            integer  NOT NULL ,
	CAP_ESTANDAR         integer  NOT NULL ,
	CAP_PREMIUM          integer  NOT NULL ,
	CONSTRAINT XPKBUS PRIMARY KEY (IDBUS ASC)
)
go



CREATE TABLE SALIDA
( 
	IDSALIDA             integer IDENTITY ( 1,1 ) ,
	IDRUTA               integer  NOT NULL ,
	IDBUS                integer  NULL ,
	FECHA_SALIDA         datetime  NOT NULL ,
	HORA_SALIDA          varchar(20)  NULL ,
	FECHA_LLEGADA        datetime  NULL ,
	HORA_LLEGADA         varchar(20)  NULL ,
	FECHA_SALIDA_REAL    datetime  NULL ,
	HORA_SALIDA_REAL     varchar(20)  NULL ,
	FECHA_LLEGADA_REAL   datetime  NULL ,
	HORA_LLEGADA_REAL    varchar(20)  NULL ,
	ESTANDAR_VENDIDOS    integer  NOT NULL ,
	PREMIUM_VENDIDOS     integer  NOT NULL ,
	CONSTRAINT XPKSALIDA PRIMARY KEY (IDSALIDA ASC),
	CONSTRAINT FK_SALIDA_RUTA FOREIGN KEY (IDRUTA) REFERENCES RUTA(IDRUTA)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_SALIDA_BUS FOREIGN KEY (IDBUS) REFERENCES BUS(IDBUS)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE EMPLEADO
( 
	IDEMPLEADO           integer IDENTITY ( 1,1 ) ,
	NOMBRE               varchar(100)  NOT NULL ,
	CORREO               varchar(60)  NOT NULL ,
	CELULAR              varchar(20)  NOT NULL ,
	CONSTRAINT XPKEMPLEADO PRIMARY KEY (IDEMPLEADO ASC)
)
go



CREATE TABLE VENTA
( 
	IDVENTA              integer IDENTITY ( 1,1 ) ,
	IDSALIDA             integer  NOT NULL ,
	IDPASAJERO           integer  NOT NULL ,
	FECHA_VENTA          datetime  NOT NULL ,
	IMPORTE              numeric(10,2)  NOT NULL ,
	IDEMPLEADO           integer  NOT NULL ,
	CONSTRAINT XPKVENTA PRIMARY KEY (IDVENTA ASC),
	CONSTRAINT FK_VENTA_PASAJERO FOREIGN KEY (IDPASAJERO) REFERENCES PASAJERO(IDPASAJERO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_SALIDA FOREIGN KEY (IDSALIDA) REFERENCES SALIDA(IDSALIDA)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_EMPLEADO FOREIGN KEY (IDEMPLEADO) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


